(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,function(e){e.exports={emailPrefix:"br.movile.com_",emailSufix:"@resource.calendar.google.com",rooms:{"2d313231333237382d343735":"br.saopaulo.playkids","2d32313831313534312d363939":"br.campinas8.42","2d32323634373831323730":"br.campinas5.apple","2d33313631373332373638":"br.campinas5.android","2d333631373431302d363135":"br.campinas8.infiltrator","2d3434333238323133353233":"br.campinas8.teatro","2d3533373435353339353732":"br.campinas8.slave1","2d3535303833313730393435":"br.campinas5.1b","2d3638313439353432373139":"br.saopaulo.klingon","2d3735393531323535313933":"br.campinas6.cinema","2d3832333631363338393834":"br.saopaulo.enterprise","2d38373636363535313336":"br.saopaulo.1b","2d39303436363035392d323339":"br.saopaulo.teatro","3130393638373136363735":"br.campinas8.deathstar","3133373337383534323334":"br.saopaulo.android","3234363930343337323534":"br.saopaulo.apple","34373232353131313036":"br.campinas8.havoc","3438353337383533383535":"br.pocos.uni.craftylands","3533373330322d373238":"br.saopaulo.milleniumfalcon","3830373339333031353532":"br.saopaulo.xwing","38343733313639342d383839":"br.campinas8.playkids","39383938353338342d363836":"br.campinas6.darkeye","6c6569747572696e68612e636f6d2e62725f33313339333433313339333433303330333833313330407265736f757263652e63616c656e6461722e676f6f676c652e636f6d":"br.pocos.duni.leiturinha","6c6569747572696e68612e636f6d2e62725f33343330333333373335333133323337333933323339407265736f757263652e63616c656e6461722e676f6f676c652e636f6d":"br.pocos.uni.playkids","6c6569747572696e68612e636f6d2e62725f33393330333833333336333033313330333633303334407265736f757263652e63616c656e6461722e676f6f676c652e636f6d":"br.pocos.duni.explorer"}}},,,function(e){e.exports={clientId:"1005220868008-hp8pnjsv667aag4mv4hpaova975a7tpo.apps.googleusercontent.com",apiKey:"AIzaSyDepoimIlEJvYILk65TumQ4elm3EbBAHIA",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],scope:"https://www.googleapis.com/auth/calendar.readonly"}},function(e,t,a){e.exports=a.p+"static/media/check.58288801.svg"},function(e,t,a){e.exports=a.p+"static/media/cross.d31a54d0.svg"},function(e,t,a){e.exports=a(28)},,,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(8),s=a.n(o),r=a(1),c=a(2),l=a(4),u=a(3),m=a(5);a(18);function d(e){var t=e.size,a=e.color;return i.a.createElement("div",{className:"loader"},i.a.createElement("svg",{className:"circular",viewBox:"25 25 50 50",style:{width:t,height:t}},i.a.createElement("circle",{className:"path",cx:"50",cy:"50",r:"20",fill:"none",strokeWidth:"2",strokeMiterlimit:"10",stroke:a})))}var p=a(9),f=function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,null,[{key:"loadClient",value:function(t,a){e.gapi=window.gapi,e.gapi.load("client:auth2",function(){e.gapi.client.init(p).then(function(){e.gapi.auth2.getAuthInstance().isSignedIn.listen(t),t(e.gapi.auth2.getAuthInstance().isSignedIn.get()),a()})})}},{key:"signIn",value:function(){e.gapi.auth2.getAuthInstance().signIn()}},{key:"queryResources",value:function(t,a,n){return e.gapi.client.calendar.freebusy.query({resource:{timeMin:a,timeMax:n,items:t,timeZone:"GMT-03",calendarExpansionMax:50}})}}]),e}();a(20);function g(e){var t=e.loading;return i.a.createElement("section",{className:"login"},i.a.createElement("h1",null,"Quero Sala PK"),i.a.createElement("h2",null,"Fa\xe7a login com sua conta da PlayKids para continuar ",i.a.createElement("span",{role:"img","aria-label":"upside-down-smile"},"\ud83d\ude43")),i.a.createElement("button",{className:t?"loading":"",onClick:t?null:f.signIn},"Autorizar",t&&i.a.createElement(d,{size:"2rem",color:"white"})))}a(22);var h=a(10),b=a.n(h),v=a(11),y=a.n(v);function w(e){var t,a;return e.busy?(t=y.a,a="Room is busy"):(t=b.a,a="Room is free"),i.a.createElement("div",{className:"room"},i.a.createElement("div",{className:"state"},i.a.createElement("img",{alt:a,src:t})),i.a.createElement("div",null,e.name))}var E=function(){function e(t,a){Object(r.a)(this,e),this.minutes=a.getMinutes()-t.getMinutes(),this.minutes<0&&(this.minutes+=60),this.seconds=a.getSeconds()-t.getSeconds(),this.seconds<0&&(this.seconds+=60),this.seconds>0&&this.minutes--}return Object(c.a)(e,[{key:"toString",value:function(){return"".concat(this.minutes,"m e ").concat(this.seconds,"s")}}]),e}(),k=a(6),x=(a(24),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={rooms:[],loading:!0,nextUpdate:null,timeRemaining:null},a.fetchRooms=function(){var e=new Date,t=new Date,n=new Date;e.getMinutes()>=30?(t.setMinutes(30,0),n.setHours(e.getHours()+1,0,0)):(t.setMinutes(0,0),n.setMinutes(30,0)),f.queryResources(a.queryItems.map(function(e){return{id:e.email}}),t.toJSON(),n.toJSON()).then(a.parseCalendarResponse),setTimeout(a.fetchRooms,n-e+1e3),a.setState({loading:!0,nextUpdate:n,timeRemaining:new E(e,n)})},a.parseCalendarResponse=function(e){var t=e.result.calendars,n=a.queryItems.sort(function(e,t){return e.name.localeCompare(t.name)}).map(function(e){return i.a.createElement(w,{key:e.id,busy:t[e.email].busy.length>0,name:e.name})});a.setState({rooms:n,loading:!1})},a.formatDate=function(){a.setState({timeRemaining:new E(new Date,a.state.nextUpdate)})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.queryItems=Object.entries(k.rooms).map(function(e){return{id:e[0],name:e[1],email:k.emailPrefix+e[0]+k.emailSufix}}),this.fetchRooms(),setInterval(this.formatDate,1e3)}},{key:"render",value:function(){var e=this.state,t=e.rooms,a=e.loading,n=e.timeRemaining;return i.a.createElement("section",{className:"rooms"},i.a.createElement("div",{className:"next-update"},i.a.createElement("h2",null,"Tempo para a pr\xf3xima atualiza\xe7\xe3o: ",a?"":n.toString()),a&&i.a.createElement(d,{color:"white"})),i.a.createElement("div",{className:"rooms-grid"},t))}}]),t}(n.Component)),I=(a(26),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={isLoading:!0,isLogged:!1},a.render=function(){return i.a.createElement("div",{className:"app"},!a.state.isLogged&&i.a.createElement(g,{loading:a.state.isLoading}),a.state.isLogged&&i.a.createElement(x,null))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.loadClient(function(t){return e.setState({isLogged:t})},function(){return e.setState({isLoading:!1})})}}]),t}(n.Component));s.a.render(i.a.createElement(I,null),document.getElementById("root"))}],[[12,2,1]]]);
//# sourceMappingURL=main.cd4f742c.chunk.js.map